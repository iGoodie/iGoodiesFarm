/*
 * Decompiled with CFR 0_102.
 * 
 * Could not load the following classes:
 *  net.minecraft.block.Block
 *  net.minecraft.init.Blocks
 *  net.minecraft.item.Item
 *  net.minecraft.item.ItemStack
 *  net.minecraft.world.IBlockAccess
 *  net.minecraft.world.World
 *  net.minecraftforge.common.IPlantable
 *  net.minecraftforge.common.util.ForgeDirection
 */
package com.pam.harvestcraft;

import net.minecraft.block.Block;
import net.minecraft.init.Blocks;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.world.IBlockAccess;
import net.minecraft.world.World;
import net.minecraftforge.common.IPlantable;
import net.minecraftforge.common.util.ForgeDirection;
import powercrystals.minefactoryreloaded.api.IFactoryPlantable;
import powercrystals.minefactoryreloaded.api.ReplacementBlock;

public class PlantableMFRCrop
implements IFactoryPlantable {
    protected Item _sourceId;
    protected Block _plantedBlockId;

    public PlantableMFRCrop(Item sourceId, Block plantedBlockId) {
        this._sourceId = sourceId;
        this._plantedBlockId = plantedBlockId;
    }

    @Override
    public boolean canBePlanted(ItemStack stack, boolean forFermenting) {
        return true;
    }

    @Override
    public boolean canBePlantedHere(World world, int x, int y, int z, ItemStack stack) {
        Block groundId = world.func_147439_a(x, y - 1, z);
        if (!world.func_147437_c(x, y, z)) {
            return false;
        }
        return this._plantedBlockId.func_149742_c(world, x, y, z) && this._plantedBlockId.func_149718_j(world, x, y, z) || this._plantedBlockId instanceof IPlantable && groundId != null && groundId.canSustainPlant((IBlockAccess)world, x, y, z, ForgeDirection.UP, (IPlantable)this._plantedBlockId);
    }

    @Override
    public void prePlant(World world, int x, int y, int z, ItemStack stack) {
    }

    @Override
    public void postPlant(World world, int x, int y, int z, ItemStack stack) {
    }

    @Override
    public ReplacementBlock getPlantedBlock(World world, int x, int y, int z, ItemStack stack) {
        if (stack.func_77973_b() != this._sourceId) {
            return new ReplacementBlock(Blocks.field_150350_a);
        }
        return new ReplacementBlock(this._plantedBlockId).setMeta(this.getMeta(stack));
    }

    @Override
    public Item getSeed() {
        return this._sourceId;
    }

    public int getMeta(ItemStack i) {
        return i.func_77960_j();
    }
}

